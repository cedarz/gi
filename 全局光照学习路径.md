# 全局光照(Global Illumination)系统化学习路径

## 学习目标
- 深入理解全局光照的理论基础和渲染方程
- 掌握主流GI算法的原理、实现和应用场景
- 厘清GI算法的历史发展脉络
- 具备实现和优化GI系统的能力

---

## 第一阶段：理论基础 (2-3周)

### 1. 辐射度量学(Radiometry)基础
**学习目标**: 理解光的物理量和传播规律

**核心概念**:
- 辐射通量(Radiant Flux)、辐射强度(Radiant Intensity)
- 辐射照度(Irradiance)、辐射亮度(Radiance)
- 立体角(Solid Angle)和半球积分
- BRDF/BTDF/BSDF基础

**推荐资源**:
- 📚 **书籍**: "Physically Based Rendering: From Theory to Implementation" (PBRT) - Chapter 5
- 📄 **论文**: "A Reflectance Model for Computer Graphics" (Cook-Torrance, 1982)
- 🎓 **课程**: GAMES101 - 现代计算机图形学入门 (闫令琪) Lecture 13-16
- 🌐 **文章**: "Radiometry for Graphics" by Henrik Wann Jensen

### 2. 渲染方程(Rendering Equation)
**学习目标**: 深刻理解全局光照的数学基础

**核心概念**:
- Kajiya渲染方程的推导和理解
- 直接光照 vs 间接光照
- 递归性质和能量守恒
- 路径积分表示

**推荐资源**:
- 📄 **论文**: "The Rendering Equation" (James Kajiya, 1986) ⭐必读
- 📚 **书籍**: "Advanced Global Illumination" (Dutré et al.) - Chapter 2-3
- 🎥 **视频**: SIGGRAPH Course "Path Tracing in Production"
- 📝 **笔记**: 推导并手写渲染方程，理解每一项的物理意义

---

## 第二阶段：离线GI算法 (4-6周)

### 3. 路径追踪(Path Tracing)
**学习目标**: 掌握最基础的蒙特卡洛渲染方法

**核心概念**:
- 蒙特卡洛积分基础
- 重要性采样(Importance Sampling)
- 俄罗斯轮盘赌(Russian Roulette)
- 多重重要性采样(Multiple Importance Sampling, MIS)

**推荐资源**:
- 📚 **书籍**: PBRT - Chapter 13-14
- 🔬 **实践**: "Ray Tracing in One Weekend" 系列 (Peter Shirley) ⭐强烈推荐
- 📄 **论文**: "Optimally Combining Sampling Techniques" (Veach & Guibas, 1995)
- 💻 **开源**: 
  - [smallpt](https://www.kevinbeason.com/smallpt/) - 99行C++路径追踪器
  - [PBRT-v3/v4](https://github.com/mmp/pbrt-v3)

**实践项目**: 实现一个基础的路径追踪器，支持diffuse、specular和玻璃材质

### 4. 双向路径追踪(Bidirectional Path Tracing, BDPT)
**学习目标**: 理解双向采样的优势

**核心概念**:
- 从光源和相机同时追踪
- 路径连接策略
- MIS权重计算
- 适用场景分析

**推荐资源**:
- 📄 **论文**: "Bidirectional Estimators for Light Transport" (Veach & Guibas, 1994)
- 📄 **论文**: "Robust Monte Carlo Methods" (Veach PhD Thesis, 1997) ⭐核心文献
- 💻 **开源**: [Mitsuba Renderer](https://github.com/mitsuba-renderer/mitsuba3)
- 📝 **文章**: "Implementing Bidirectional Path Tracing" - Jakub Boksansky

### 5. Metropolis光线传输(Metropolis Light Transport, MLT)
**学习目标**: 掌握MCMC在渲染中的应用

**核心概念**:
- Markov Chain Monte Carlo基础
- Metropolis-Hastings算法
- 路径空间的突变策略
- Primary Sample Space MLT (PSSMLT)

**推荐资源**:
- 📄 **论文**: "Metropolis Light Transport" (Veach & Guibas, 1997)
- 📄 **论文**: "A Simple and Robust Mutation Strategy for MLT" (Kelemen et al., 2002)
- 📄 **论文**: "Multiplexed Metropolis Light Transport" (Hachisuka et al., 2014)
- 💻 **开源**: Mitsuba中的MLT实现

### 6. 光子映射(Photon Mapping)
**学习目标**: 理解粒子追踪与密度估计结合

**核心概念**:
- 光子发射与存储
- KD-Tree空间数据结构
- 密度估计与最近邻搜索
- 渐进式光子映射(Progressive Photon Mapping, PPM)
- 随机渐进式光子映射(SPPM)

**推荐资源**:
- 📄 **论文**: "Global Illumination using Photon Maps" (Jensen, 1996) ⭐开创性
- 📚 **书籍**: "Realistic Image Synthesis Using Photon Mapping" (Jensen, 2001)
- 📄 **论文**: "Progressive Photon Mapping" (Hachisuka et al., 2008)
- 📄 **论文**: "Stochastic Progressive Photon Mapping" (Hachisuka & Jensen, 2009)
- 💻 **开源**: [SmallPPM](https://github.com/xelatihy/smallppm)

**实践项目**: 实现基础光子映射，处理焦散(Caustics)场景

### 7. 辐射度方法(Radiosity)
**学习目标**: 了解有限元方法在GI中的应用(历史方法)

**核心概念**:
- Diffuse场景的形状因子(Form Factor)
- 线性系统求解
- 渐进式辐射度
- 层次化辐射度

**推荐资源**:
- 📚 **书籍**: "Advanced Global Illumination" - Chapter 4-5
- 📄 **论文**: "Modeling the Interaction of Light Between Diffuse Surfaces" (Goral et al., 1984)
- 📄 **论文**: "A Progressive Refinement Approach to Fast Radiosity" (Cohen et al., 1988)
- 🎓 **历史价值**: 理解GI早期研究方向

---

## 第三阶段：实时GI预计算方法 (3-4周)

### 8. 辐照度环境映射(Irradiance Environment Mapping)
**学习目标**: 理解球谐函数在GI中的应用

**核心概念**:
- 球谐函数(Spherical Harmonics, SH)基础
- SH投影与重建
- 预计算辐照度环境映射
- 动态场景的SH传输

**推荐资源**:
- 📄 **论文**: "An Efficient Representation for Irradiance Environment Maps" (Ramamoorthi & Hanrahan, 2001)
- 📄 **论文**: "Precomputed Radiance Transfer" (Sloan et al., 2002) ⭐重要
- 🎓 **课程**: GAMES202 - 高质量实时渲染 Lecture 4-5
- 📝 **文章**: "Stupid Spherical Harmonics (SH) Tricks" - Peter-Pike Sloan

### 9. 预计算辐射传输(Precomputed Radiance Transfer, PRT)
**学习目标**: 掌握低频GI的预计算方法

**核心概念**:
- 传输函数预计算
- Diffuse和Glossy PRT
- 实时旋转和动态光照
- All-Frequency PRT

**推荐资源**:
- 📄 **论文**: "Precomputed Radiance Transfer" (Sloan et al., 2002)
- 📄 **论文**: "All-Frequency Shadows Using Non-linear Wavelet Lighting Approximation" (Ng et al., 2003)
- 📄 **论文**: "Triple Product Wavelet Integrals for All-Frequency Relighting" (Ng et al., 2004)
- 💻 **开源**: DirectX SDK中的PRT示例

### 10. 反射阴影图(Reflective Shadow Maps, RSM)
**学习目标**: 理解虚拟点光源(VPL)的实时应用

**核心概念**:
- 从光源视角渲染场景到G-Buffer
- 将阴影图像素作为虚拟点光源(VPL)
- 采样VPL计算间接光照
- 重要性采样减少VPL数量

**推荐资源**:
- 📄 **论文**: "Instant Radiosity" (Keller, 1997) - VPL理论基础
- 📄 **论文**: "Reflective Shadow Maps" (Dachsbacher & Stamminger, 2005) ⭐开创性工作
- 📄 **论文**: "Splatting Indirect Illumination" (Dachsbacher & Stamminger, 2006)
- 🎓 **课程**: GAMES202 Lecture 6 - RSM详解
- 📝 **文章**: "Reflective Shadow Maps" tutorial (多个引擎实现参考)

**优缺点分析**:
- ✅ 概念简单，易于实现
- ✅ 完全动态，支持动态光源和场景
- ✅ 作为其他算法的基础（LPV、VCT等）
- ❌ 需要大量VPL采样（噪声）
- ❌ 只能处理直接可见表面
- ❌ 单次反弹限制

### 11. 光照传播体积(Light Propagation Volumes, LPV)
**学习目标**: 理解基于RSM的体素化GI方法

**核心概念**:
- Reflective Shadow Maps (RSM)
- 体素网格中的SH传播
- 级联LPV处理大场景
- 几何遮挡问题与解决方案

**推荐资源**:
- 📄 **论文**: "Cascaded Light Propagation Volumes" (Kaplanyan, 2009)
- 🎮 **引擎**: CryEngine的LPV实现
- 🎥 **GDC Talk**: "Light Propagation Volumes in CryEngine 3" (Kaplanyan, GDC 2010)
- 📝 **文章**: "Lighting Research at Bungie" (CryTek presentations)
- 🎓 **课程**: GAMES202 Lecture 7 - LPV详解

**依赖关系**: 建议先学习RSM，LPV使用RSM作为输入

---

## 第四阶段：现代实时GI技术 (6-8周)

### 11. 屏幕空间GI (SSGI)
**学习目标**: 掌握屏幕空间近似方法

**核心概念**:
- 屏幕空间环境光遮蔽(SSAO)
- 屏幕空间反射(SSR)
- 屏幕空间全局光照(SSGI)
- 时域累积与降噪

**推荐资源**:
- 📄 **论文**: "Screen Space Ambient Occlusion" (Crytek, 2007)
- 📄 **论文**: "Practical Real-Time Strategies for Accurate Indirect Occlusion" (McGuire et al., 2011)
- 🎮 **案例**: Unreal Engine的SSGI实现
- 📝 **文章**: "Screen Space Illumination" - GPU Pro系列

### 12. 体素锥追踪(Voxel Cone Tracing, VCT)
**学习目标**: 理解体素化GI的高级方法

**核心概念**:
- 场景体素化与Sparse Voxel Octree (SVO)
- 锥形追踪的光泽反射
- Anisotropic voxel mipmap
- 动态场景更新策略

**推荐资源**:
- 📄 **论文**: "Interactive Indirect Illumination Using Voxel Cone Tracing" (Crassin et al., 2011) ⭐核心
- 📄 **论文**: "Octree-Based Sparse Voxelization Using the GPU" (Crassin & Green, 2012)
- 💻 **开源**: [VoxelConeTracing](https://github.com/Friduric/voxel-cone-tracing)
- 🎥 **视频**: NVIDIA's "Voxel Cone Tracing and Sparse Voxel Octree" demos

**实践项目**: 实现基于SVO的体素锥追踪

### 13. 动态漫反射全局光照(DDGI)
**学习目标**: 掌握探针网格方法

**核心概念**:
- Irradiance Probes系统
- 探针的射线追踪更新
- 八面体映射存储
- 探针插值与混合

**推荐资源**:
- 📄 **论文**: "Dynamic Diffuse Global Illumination with Ray-Traced Irradiance Fields" (Majercik et al., 2019) ⭐NVIDIA方案
- 📄 **论文**: "Scaling Probe-Based Real-Time Dynamic Global Illumination" (Majercik et al., 2021)
- 💻 **开源**: [RTXGI SDK](https://github.com/NVIDIAGameWorks/RTXGI)
- 🎮 **引擎**: Unreal Engine 5的Lumen探针系统

### 14. 虚幻引擎Lumen系统
**学习目标**: 了解现代混合GI方案

**核心概念**:
- 软件/硬件光线追踪混合
- Surface Cache系统
- Screen Probes
- 多级距离场表示
- 时域累积策略

**推荐资源**:
- 🎥 **视频**: "Lumen in the Land of Nanite" (UE5 Demo breakdown)
- 📝 **文档**: [Unreal Engine Lumen Technical Details](https://docs.unrealengine.com/5.0/en-US/lumen-technical-details/)
- 🎥 **GDC**: "A Deep Dive into Lumen" (Daniel Wright, 2022)
- 💡 **实践**: 在UE5中调试和分析Lumen各个passes

### 15. 基于神经网络的GI
**学习目标**: 了解AI在GI中的最新应用

**核心概念**:
- 神经网络降噪(Neural Denoising)
- Neural Radiance Caching
- 深度学习实时路径追踪
- NeRF与辐射场表示

**推荐资源**:
- 📄 **论文**: "Neural Importance Sampling" (Müller et al., 2019)
- 📄 **论文**: "Real-time Neural Radiance Caching" (Müller et al., 2021) ⭐NVIDIA方案
- 📄 **论文**: "DLSS 3.5: Ray Reconstruction" (NVIDIA, 2023)
- 💻 **开源**: [tiny-cuda-nn](https://github.com/NVIDIAGameWorks/tiny-cuda-nn)
- 📄 **论文**: "NeRF: Neural Radiance Fields" (Mildenhall et al., 2020)

---

## 第五阶段：硬件光线追踪GI (4-5周)

### 16. 硬件光线追踪基础
**学习目标**: 掌握现代GPU光追API

**核心概念**:
- DXR / Vulkan Ray Tracing基础
- 加速结构(BVH)构建
- Ray Generation / Closest Hit / Any Hit Shaders
- 性能优化与BVH遍历

**推荐资源**:
- 📚 **书籍**: "Ray Tracing Gems" (2019) ⭐必读
- 📚 **书籍**: "Ray Tracing Gems II" (2021)
- 🎓 **教程**: [NVIDIA DXR Tutorial](https://developer.nvidia.com/rtx/raytracing/dxr/DX12-Raytracing-tutorial-Part-1)
- 💻 **开源**: [DXR-Tutorials](https://github.com/NVIDIAGameWorks/DxrTutorials)

### 17. ReSTIR (Reservoir-based Spatiotemporal Importance Resampling)
**学习目标**: 理解重采样在实时光追中的应用

**核心概念**:
- Resampled Importance Sampling (RIS)
- 空间重用(Spatial Reuse)
- 时域重用(Temporal Reuse)
- ReSTIR Direct Illumination
- ReSTIR GI

**推荐资源**:
- 📄 **论文**: "Spatiotemporal Reservoir Resampling for Real-Time Ray Tracing" (Bitterli et al., 2020) ⭐重要突破
- 📄 **论文**: "ReSTIR GI: Path Resampling for Real-Time Path Tracing" (Ouyang et al., 2021)
- 💻 **开源**: [RTXDI SDK](https://github.com/NVIDIAGameWorks/RTXDI)
- 🎥 **SIGGRAPH**: "Rearchitecting Spatiotemporal Resampling" (2021)

**实践项目**: 实现ReSTIR Direct Illumination

### 18. 实时降噪(Real-time Denoising)
**学习目标**: 掌握低采样率光追的降噪技术

**核心概念**:
- 空间滤波(Spatial Filtering)
- 时域累积(Temporal Accumulation)
- SVGF (Spatiotemporal Variance-Guided Filtering)
- BMFR (Block-Matching and 3D Filtering)
- AI降噪(DLSS Ray Reconstruction)

**推荐资源**:
- 📄 **论文**: "Spatiotemporal Variance-Guided Filtering" (Schied et al., 2017) ⭐基础方法
- 📄 **论文**: "Gradient Estimation for Real-Time Adaptive Temporal Filtering" (Hasselgren et al., 2015)
- 💻 **开源**: [NVIDIA Real-Time Denoisers (NRD)](https://github.com/NVIDIAGameWorks/RayTracingDenoiser)
- 📄 **论文**: "Interactive Reconstruction of Monte Carlo Image Sequences" (BMFR, Rousselle et al., 2011)

---

## 第六阶段：高级主题与优化 (持续学习)

### 19. 性能优化与调试
**学习内容**:
- GI算法的性能分析
- 不同场景下的算法选择
- 质量与性能权衡
- 实时GI的LOD策略
- Profiling工具使用

**推荐资源**:
- 📝 **文章**: "GPU Pro" 和 "GPU Zen" 系列书籍
- 🔧 **工具**: RenderDoc, PIX, Nsight Graphics
- 🎥 **GDC**: 各大引擎的性能优化talk

### 20. 混合GI系统设计
**学习内容**:
- 屏幕空间 + 探针 + 光追的混合方案
- Fallback策略设计
- 不同硬件平台的适配
- 可扩展性架构

**推荐资源**:
- 📝 **案例**: 分析《赛博朋克2077》、《地平线：西之绝境》等游戏的GI方案
- 🎥 **GDC**: "Ghost of Tsushima: Procedural GI" (2021)
- 🎥 **SIGGRAPH**: "The Rendering of The Last of Us Part II" (2021)

---

## GI算法发展时间线总结

### 1980年代 - 理论奠基
- **1984**: Radiosity方法诞生 (Goral et al.)
- **1986**: 渲染方程提出 ⭐ (Kajiya)
- **1989**: Hierarchical Radiosity

### 1990年代 - 蒙特卡洛方法兴起
- **1994**: Bidirectional Path Tracing (Veach & Guibas)
- **1996**: Photon Mapping ⭐ (Jensen)
- **1997**: Metropolis Light Transport (Veach & Guibas)
- **1997**: Instant Radiosity (Keller)

### 2000年代 - 预计算与实时化探索
- **2001**: Irradiance Environment Maps (Ramamoorthi)
- **2002**: Precomputed Radiance Transfer ⭐ (Sloan)
- **2005**: Reflective Shadow Maps ⭐ (Dachsbacher & Stamminger) - VPL实时应用
- **2008**: Progressive Photon Mapping (Hachisuka)
- **2009**: Light Propagation Volumes (Kaplanyan) - 基于RSM

### 2010年代 - 实时GI技术爆发
- **2011**: Voxel Cone Tracing ⭐ (Crassin)
- **2012-2015**: 屏幕空间技术成熟 (SSAO, SSR, SSGI)
- **2018**: DXR/RTX硬件光追发布 ⭐
- **2019**: DDGI (Majercik, NVIDIA)

### 2020年代 - 硬件加速与AI融合
- **2020**: ReSTIR ⭐ (Bitterli, NVIDIA)
- **2021**: ReSTIR GI, Neural Radiance Caching
- **2022**: Unreal Engine 5 Lumen发布 ⭐
- **2023+**: AI降噪与神经辐射场的融合

---

## 实践项目建议

### 初级项目
1. **Path Tracer**: 实现Cornell Box渲染器，支持diffuse/specular/glass材质
2. **Photon Mapping**: 实现简单的光子映射，渲染焦散效果
3. **SSAO**: 在现有引擎中实现SSAO

### 中级项目
1. **完整的离线渲染器**: 支持BDPT、MLT等多种算法
2. **LPV/VCT**: 在Unity/Unreal中实现体素GI
3. **探针系统**: 实现简化版的DDGI

### 高级项目
1. **混合GI系统**: 结合屏幕空间、探针和光追的完整方案
2. **ReSTIR实现**: 在DXR/Vulkan RT中实现ReSTIR DI/GI
3. **自定义引擎**: 从零构建支持现代GI的实时渲染引擎

---

## 学习资源汇总

### 核心书籍 📚
1. **"Physically Based Rendering: From Theory to Implementation"** (PBRT) - 圣经级教材
2. **"Advanced Global Illumination"** (Dutré, Bekaert, Bala) - GI理论专著
3. **"Real-Time Rendering"** (4th Edition) - 实时渲染全面覆盖
4. **"Ray Tracing Gems"** (I & II) - 现代光追技术集锦
5. **"Realistic Image Synthesis Using Photon Mapping"** (Jensen) - 光子映射权威

### 在线课程 🎓
1. **GAMES101** - 现代计算机图形学入门 (闫令琪)
2. **GAMES202** - 高质量实时渲染 (闫令琪) ⭐强烈推荐
3. **TU Wien Rendering Course** - 深入的渲染理论
4. **Scratchapixel** - 免费的图形学教程网站

### 重要会议与期刊
- **SIGGRAPH / SIGGRAPH Asia** - 顶级图形学会议
- **Eurographics / EGSR** - 欧洲图形学会议
- **HPG (High-Performance Graphics)** - 实时渲染专题
- **GDC Talks** - 游戏工业实践经验

### 开源项目 💻
1. [PBRT](https://github.com/mmp/pbrt-v3) - 教科书配套代码
2. [Mitsuba](https://github.com/mitsuba-renderer/mitsuba3) - 研究级渲染器
3. [Filament](https://github.com/google/filament) - Google实时PBR引擎
4. [RTXGI](https://github.com/NVIDIAGameWorks/RTXGI) - NVIDIA实时GI解决方案
5. [Ray Tracing in One Weekend](https://github.com/RayTracing/raytracing.github.io) - 入门神器

### 博客与文章 📝
- **Matt Pharr's Blog** (PBRT作者)
- **Self Shadow** - 大量SIGGRAPH课程笔记
- **GPU Pro / GPU Zen** 系列
- **Graphics Programming Weekly** - 业界动态跟踪

---

## 学习建议与时间规划

### 总体时间估算
- **兼职学习**: 6-9个月完成核心内容
- **全职学习**: 3-4个月完成核心内容
- **持续进阶**: 跟踪最新论文和技术是长期过程

### 学习策略
1. **理论与实践结合**: 每学一个算法就动手实现
2. **代码阅读**: 研读PBRT、Mitsuba等高质量代码
3. **论文精读**: 核心论文要反复读，理解推导过程
4. **可视化调试**: 学会渲染中间结果，理解每个步骤
5. **性能分析**: 关注算法的时间/空间复杂度
6. **案例分析**: 研究商业游戏/引擎的GI方案

### 评估标准
- ✅ 能够从零实现路径追踪器
- ✅ 理解主流GI算法的原理和适用场景
- ✅ 能够在引擎中实现和调优GI系统
- ✅ 可以阅读最新SIGGRAPH论文并理解创新点
- ✅ 具备设计混合GI方案的能力

---

## 进阶方向

完成上述学习后，可以选择以下方向深入:

1. **实时光追优化** - BVH构建、遍历优化、硬件特性利用
2. **大规模场景GI** - 开放世界的流式加载、LOD系统
3. **动态场景GI** - 可破坏环境、实时烘焙
4. **AI与GI结合** - 神经渲染、学习型降噪
5. **移动端GI** - 低功耗下的GI近似
6. **VR/AR中的GI** - 立体渲染、低延迟要求

---

## 结语

全局光照是图形学中最迷人的领域之一，从Kajiya在1986年提出渲染方程，到今天Lumen、ReSTIR等实时方案的落地，这个领域经历了近40年的发展。系统学习GI不仅能提升技术能力，更能深刻理解"光"这一计算机图形学的核心主题。

祝你学习顺利！如果在学习过程中遇到问题，欢迎随时交流。

---

**文档版本**: v1.0  
**最后更新**: 2025年10月  
**作者**: AI Assistant  
**用途**: 个人学习路径规划

